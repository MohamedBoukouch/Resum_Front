{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/resume_front/lib/api.ts"],"sourcesContent":["const API_BASE_URL =\r\n  process.env.NEXT_PUBLIC_API_URL || \"http://127.0.0.1:8000\"\r\n\r\n// ============================\r\n// AUTH API\r\n// ============================\r\n\r\nexport const authAPI = {\r\n  signup: async (data: {\r\n    email: string\r\n    username: string\r\n    password: string\r\n    full_name: string\r\n  }) => {\r\n    return fetchAPI(\"/api/auth/signup\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify(data),\r\n    })\r\n  },\r\n\r\n  login: async (credentials: { username: string; password: string }) => {\r\n    const formData = new URLSearchParams()\r\n    formData.append(\"username\", credentials.username)\r\n    formData.append(\"password\", credentials.password)\r\n\r\n    return fetch(`${API_BASE_URL}/api/auth/login`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/x-www-form-urlencoded\",\r\n      },\r\n      body: formData,\r\n    }).then(handleResponse)\r\n  },\r\n\r\n  me: async () => {\r\n    return fetchAPI(\"/api/auth/me\", { method: \"GET\" })\r\n  },\r\n\r\n  logout: () => {\r\n    clearAuthToken()\r\n  },\r\n}\r\n\r\n// ============================\r\n// FETCH WRAPPER\r\n// ============================\r\n\r\nasync function fetchAPI(endpoint: string, options: RequestInit) {\r\n  const token = getAuthToken()\r\n\r\n  const headers: HeadersInit = {\r\n    \"Content-Type\": \"application/json\",\r\n    ...(token && { Authorization: `Bearer ${token}` }),\r\n    ...(options.headers || {}),\r\n  }\r\n\r\n  const response = await fetch(`${API_BASE_URL}${endpoint}`, {\r\n    ...options,\r\n    headers,\r\n  })\r\n\r\n  return handleResponse(response)\r\n}\r\n\r\nasync function handleResponse(response: Response) {\r\n  const data = await response.json().catch(() => null)\r\n\r\n  if (!response.ok) {\r\n    throw new Error(data?.detail || \"Something went wrong\")\r\n  }\r\n\r\n  return data\r\n}\r\n\r\n// ============================\r\n// TOKEN STORAGE\r\n// ============================\r\n\r\nconst TOKEN_KEY = \"access_token\"\r\n\r\nexport const setAuthToken = (token: string) => {\r\n  localStorage.setItem(TOKEN_KEY, token)\r\n}\r\n\r\nexport const getAuthToken = () => {\r\n  return typeof window !== \"undefined\"\r\n    ? localStorage.getItem(TOKEN_KEY)\r\n    : null\r\n}\r\n\r\nexport const clearAuthToken = () => {\r\n  localStorage.removeItem(TOKEN_KEY)\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;AACE;AADF,MAAM,eACJ,2KAAO,CAAC,GAAG,CAAC,mBAAmB,IAAI;AAM9B,MAAM,UAAU;IACrB,QAAQ,OAAO;QAMb,OAAO,SAAS,oBAAoB;YAClC,QAAQ;YACR,MAAM,KAAK,SAAS,CAAC;QACvB;IACF;IAEA,OAAO,OAAO;QACZ,MAAM,WAAW,IAAI;QACrB,SAAS,MAAM,CAAC,YAAY,YAAY,QAAQ;QAChD,SAAS,MAAM,CAAC,YAAY,YAAY,QAAQ;QAEhD,OAAO,MAAM,GAAG,aAAa,eAAe,CAAC,EAAE;YAC7C,QAAQ;YACR,SAAS;gBACP,gBAAgB;YAClB;YACA,MAAM;QACR,GAAG,IAAI,CAAC;IACV;IAEA,IAAI;QACF,OAAO,SAAS,gBAAgB;YAAE,QAAQ;QAAM;IAClD;IAEA,QAAQ;QACN;IACF;AACF;AAEA,+BAA+B;AAC/B,gBAAgB;AAChB,+BAA+B;AAE/B,eAAe,SAAS,QAAgB,EAAE,OAAoB;IAC5D,MAAM,QAAQ;IAEd,MAAM,UAAuB;QAC3B,gBAAgB;QAChB,GAAI,SAAS;YAAE,eAAe,CAAC,OAAO,EAAE,OAAO;QAAC,CAAC;QACjD,GAAI,QAAQ,OAAO,IAAI,CAAC,CAAC;IAC3B;IAEA,MAAM,WAAW,MAAM,MAAM,GAAG,eAAe,UAAU,EAAE;QACzD,GAAG,OAAO;QACV;IACF;IAEA,OAAO,eAAe;AACxB;AAEA,eAAe,eAAe,QAAkB;IAC9C,MAAM,OAAO,MAAM,SAAS,IAAI,GAAG,KAAK,CAAC,IAAM;IAE/C,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,IAAI,MAAM,MAAM,UAAU;IAClC;IAEA,OAAO;AACT;AAEA,+BAA+B;AAC/B,gBAAgB;AAChB,+BAA+B;AAE/B,MAAM,YAAY;AAEX,MAAM,eAAe,CAAC;IAC3B,aAAa,OAAO,CAAC,WAAW;AAClC;AAEO,MAAM,eAAe;IAC1B,OAAO,uCACH,aAAa,OAAO,CAAC,aACrB;AACN;AAEO,MAAM,iBAAiB;IAC5B,aAAa,UAAU,CAAC;AAC1B"}},
    {"offset": {"line": 89, "column": 0}, "map": {"version":3,"sources":["file:///D:/resume_front/components/auth/signup-form.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState } from \"react\"\r\nimport { useRouter } from \"next/navigation\"\r\nimport { authAPI, setAuthToken } from \"@/lib/api\"\r\n\r\nexport default function AuthForm() {\r\n  const router = useRouter()\r\n  const [mode, setMode] = useState<\"login\" | \"signup\">(\"login\")\r\n  const [loading, setLoading] = useState(false)\r\n  const [error, setError] = useState<string | null>(null)\r\n\r\n  const [loginData, setLoginData] = useState({\r\n    username: \"\",\r\n    password: \"\",\r\n  })\r\n\r\n  const [signupData, setSignupData] = useState({\r\n    full_name: \"\",\r\n    email: \"\",\r\n    username: \"\",\r\n    password: \"\",\r\n    confirmPassword: \"\",\r\n  })\r\n\r\n  const handleLogin = async (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n    setError(null)\r\n    setLoading(true)\r\n\r\n    try {\r\n      const res = await authAPI.login(loginData)\r\n      setAuthToken(res.access_token)\r\n      router.push(\"/dashboard\")\r\n    } catch (err: any) {\r\n      setError(err.message)\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  const handleSignup = async (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n    setError(null)\r\n\r\n    if (signupData.password !== signupData.confirmPassword) {\r\n      setError(\"Passwords do not match\")\r\n      return\r\n    }\r\n\r\n    setLoading(true)\r\n\r\n    try {\r\n      await authAPI.signup({\r\n        email: signupData.email,\r\n        username: signupData.username,\r\n        password: signupData.password,\r\n        full_name: signupData.full_name,\r\n      })\r\n\r\n      setMode(\"login\")\r\n      setLoginData({\r\n        username: signupData.username,\r\n        password: signupData.password,\r\n      })\r\n    } catch (err: any) {\r\n      setError(err.message)\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"max-w-md mx-auto mt-20\">\r\n      <h1 className=\"text-2xl font-bold mb-4\">\r\n        {mode === \"login\" ? \"Login\" : \"Signup\"}\r\n      </h1>\r\n\r\n      {error && <p className=\"text-red-500\">{error}</p>}\r\n\r\n      {mode === \"login\" ? (\r\n        <form onSubmit={handleLogin} className=\"space-y-3\">\r\n          <input\r\n            placeholder=\"Username\"\r\n            value={loginData.username}\r\n            onChange={(e) =>\r\n              setLoginData({ ...loginData, username: e.target.value })\r\n            }\r\n          />\r\n          <input\r\n            type=\"password\"\r\n            placeholder=\"Password\"\r\n            value={loginData.password}\r\n            onChange={(e) =>\r\n              setLoginData({ ...loginData, password: e.target.value })\r\n            }\r\n          />\r\n          <button disabled={loading}>Login</button>\r\n        </form>\r\n      ) : (\r\n        <form onSubmit={handleSignup} className=\"space-y-3\">\r\n          <input\r\n            placeholder=\"Full name\"\r\n            value={signupData.full_name}\r\n            onChange={(e) =>\r\n              setSignupData({ ...signupData, full_name: e.target.value })\r\n            }\r\n          />\r\n          <input\r\n            placeholder=\"Email\"\r\n            value={signupData.email}\r\n            onChange={(e) =>\r\n              setSignupData({ ...signupData, email: e.target.value })\r\n            }\r\n          />\r\n          <input\r\n            placeholder=\"Username\"\r\n            value={signupData.username}\r\n            onChange={(e) =>\r\n              setSignupData({ ...signupData, username: e.target.value })\r\n            }\r\n          />\r\n          <input\r\n            type=\"password\"\r\n            placeholder=\"Password\"\r\n            value={signupData.password}\r\n            onChange={(e) =>\r\n              setSignupData({ ...signupData, password: e.target.value })\r\n            }\r\n          />\r\n          <input\r\n            type=\"password\"\r\n            placeholder=\"Confirm password\"\r\n            value={signupData.confirmPassword}\r\n            onChange={(e) =>\r\n              setSignupData({\r\n                ...signupData,\r\n                confirmPassword: e.target.value,\r\n              })\r\n            }\r\n          />\r\n          <button disabled={loading}>Create account</button>\r\n        </form>\r\n      )}\r\n\r\n      <button onClick={() => setMode(mode === \"login\" ? \"signup\" : \"login\")}>\r\n        {mode === \"login\" ? \"Create account\" : \"Back to login\"}\r\n      </button>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}}]
}